!function(){"use strict";angular.module("WeatherMeme",["ngAnimate"])}(),function(){"use strict";var e=angular.module("WeatherMeme");e.controller("MainController",["$scope","$q","$timeout","WeatherService","LocationService",function(e,t,n,o,r){e.cityName="",e.contentLoaded=!1,e.curForecast={},e.weeklyForecast={},e.clock="",e.interval=1e3;var a=function(){e.clock=Date.now(),n(a,e.interval)};e.init=function(){e.cityName="Denver, CO",e.getByCityName(),e.getByLocation()},e.getByCityName=function(){var t=r.getLatLng(e.cityName);t.then(function(t){e.contentLoaded=!1;var r=o.getForecast(t.k,t.D);r.then(function(t){n(a,e.interval),e.curForecast=t.currently,e.weeklyForecast=t.daily,e.contentLoaded=!0})})},e.getByLocation=function(){var t=r.getLocation();t.then(function(t){e.contentLoaded=!1;var c=r.getLocationName(t.coords.latitude,t.coords.longitude);c.then(function(t){e.cityName=t[0].address_components[2].long_name+", "+t[0].address_components[4].short_name});var i=o.getForecast(t.coords.latitude,t.coords.longitude);i.then(function(t){n(a,e.interval),e.curForecast=t.currently,e.weeklyForecast=t.daily,e.contentLoaded=!0})},function(){e.contentLoaded=!1,e.cityName="Denver, CO",e.getByCityName()})},e.init()}])}(),function(){"use strict";var e=angular.module("WeatherMeme");e.filter("kelvinToCelsius",function(){return function(e){var t=parseFloat(e)-273.15;return parseInt(Math.round(t))}}),e.filter("kelvinToFahrenheit",function(){return function(e){var t=1.8*(parseFloat(e)-273.15)+32;return parseInt(Math.round(t))}}),e.filter("windDirection",function(){return function(e){var t=parseInt(e/22.5+.5),n=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"];return n[t%16]}}),e.filter("mpsToMph",function(){return function(e){var t=2.24*parseFloat(e);return Math.round(t)+" MPH"}})}(),function(){"use strict";var e=angular.module("WeatherMeme");e.factory("LocationService",["$q","$window",function(e,t){return{getLocation:function(){var n=e.defer();return t.navigator&&t.navigator.geolocation?t.navigator.geolocation.getCurrentPosition(function(e){n.resolve(e)},function(e){n.reject({message:e.message,code:e.code})}):n.reject({error:"Geolocation failed"}),n.promise},getLocationName:function(t,n){var o=e.defer(),r=new google.maps.LatLng(t,n),a=new google.maps.Geocoder;return a.geocode({latLng:r},function(e,t){t==google.maps.GeocoderStatus.OK?o.resolve(e):o.reject(t)}),o.promise},getLatLng:function(t){var n=e.defer(),o=new google.maps.Geocoder;return o.geocode({address:t},function(e,t){t==google.maps.GeocoderStatus.OK?n.resolve(e[0].geometry.location):n.reject(t)}),n.promise}}}])}(),function(){"use strict";var e=angular.module("WeatherMeme");e.constant("API_KEY","86b4ed42d8cbf4a2923a4f187bd839f1"),e.constant("WEATHER_API","https://api.forecast.io/forecast/"),e.factory("WeatherService",["$http","$q","API_KEY","WEATHER_API",function(e,t,n,o){return{getForecast:function(r,a){var c=t.defer();return e.get("//jsonp.nodejitsu.com/?url="+encodeURI(o+n+"/"+r+","+a)).success(function(e){c.resolve(e)}).error(function(e){c.reject(e)}),c.promise}}}])}();